<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Color Grid Points</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .cell {
      width: 40px;
      height: 40px;
      cursor: pointer;
    }
    .selected {
      outline: 3px solid white;
    }
  </style>
</head>
<body class="bg-black flex flex-col items-center justify-center min-h-screen text-white">
  <h1 class="text-xl mb-4">Color Grid Points</h1>
  <div id="grid" class="grid gap-1" style="grid-template-columns: repeat(15, 40px);"></div>
  <div class="mt-4 text-lg">
    Total Points: <span id="points">0</span>
  </div>
  <div class="mt-2 text-lg">
    Last Click: <span id="lastClick">None</span>
  </div>

  <script>
    const rows = 7;
    const cols = 15;
    const grid = document.getElementById("grid");
    const pointsDisplay = document.getElementById("points");
    const lastClickDisplay = document.getElementById("lastClick");
    let totalPoints = 0;

    const colLabels = "ABCDEFGHIJKLMNO".split("");
    const hues = Array.from({length: cols}, (_, i) => (i / cols) * 360);
    const lightness = Array.from({length: rows}, (_, i) => 90 - i * 12);

    for (let r = 0; r < rows; r++) {
      for (let c = 0; c < cols; c++) {
        const cell = document.createElement("div");
        cell.className = "cell";
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.style.backgroundColor = `hsl(${hues[c]}, 80%, ${lightness[r]}%)`;
        grid.appendChild(cell);
      }
    }

    function getNeighbors(r, c, distance) {
      let neighbors = [];
      for (let dr = -distance; dr <= distance; dr++) {
        for (let dc = -distance; dc <= distance; dc++) {
          if (dr === 0 && dc === 0) continue;
          let nr = r + dr, nc = c + dc;
          if (nr >= 0 && nr < rows && nc >= 0 && nc < cols) {
            if (Math.max(Math.abs(dr), Math.abs(dc)) === distance) {
              neighbors.push([nr, nc]);
            }
          }
        }
      }
      return neighbors;
    }

    grid.addEventListener("click", e => {
      if (!e.target.classList.contains("cell")) return;

      document.querySelectorAll(".cell").forEach(c => c.classList.remove("selected"));
      e.target.classList.add("selected");

      let r = parseInt(e.target.dataset.row);
      let c = parseInt(e.target.dataset.col);
      let points = 3;

      getNeighbors(r, c, 1).forEach(([nr, nc]) => points += 2);
      getNeighbors(r, c, 2).forEach(([nr, nc]) => points += 1);

      totalPoints += points;
      pointsDisplay.textContent = totalPoints;
      lastClickDisplay.textContent = `${colLabels[c]}${r + 1}`;
    });
  </script>
</body>
</html>
