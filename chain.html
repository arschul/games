<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Word Chain Game</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #f0f4f8, #e0f7fa);
      text-align: center;
      padding: 30px;
    }
    #game-area {
      background: white;
      padding: 25px;
      margin: auto;
      width: 90%;
      max-width: 650px;
      border-radius: 12px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    input[type="text"] {
      padding: 10px;
      font-size: 1em;
      width: 80%;
      margin: 10px 0;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      padding: 10px 20px;
      font-size: 1em;
      margin: 10px 5px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      transition: background 0.3s;
    }
    #submit-btn { background: #4caf50; color: white; }
    #new-game-btn { background: #f44336; color: white; }
    #pause-btn { background: #2196f3; color: white; }

    #alphabet {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 15px;
    }
    #alphabet button {
      margin: 4px;
      width: 40px;
      height: 40px;
      font-size: 1em;
      border: 1px solid #aaa;
      border-radius: 4px;
      cursor: pointer;
    }
    #alphabet button.disabled {
      background: #ccc;
      color: #666;
      cursor: not-allowed;
    }
    #message {
      color: #d32f2f;
      font-weight: bold;
      min-height: 1.2em;
      margin-top: 10px;
    }
    #progress-container {
      width: 100%;
      background: #eee;
      border-radius: 10px;
      overflow: hidden;
      height: 20px;
      margin: 15px 0;
      position: relative;
    }
    #progress-bar {
      height: 100%;
      width: 100%;
      background: linear-gradient(to right, #4caf50, #81c784);
      transition: width 1s linear;
    }
    #timer-label {
      font-weight: bold;
      color: #333;
    }
  </style>
</head>
<body>
  <h1>Word Chain Game</h1>
  <div id="game-area">
    <p>Current Word: <strong><span id="current-word">None</span></strong></p>
    <p>Required Length: <strong><span id="required-length">3</span></strong></p>
    <p id="timer-label">Time Left: <span id="timer">30</span> seconds</p>
    <div id="progress-container">
      <div id="progress-bar"></div>
    </div>
    <input type="text" id="word-input" placeholder="Type your word here" />
    <br />
    <button id="submit-btn">Submit</button>
    <button id="pause-btn">Pause</button>
    <button id="new-game-btn">New Game</button>
    <div id="alphabet"></div>
    <div id="message"></div>
  </div>

  <script>
    let currentWord = "";
    let requiredLength = 3;
    let usedLetters = [];
    let timeLeft = 30;
    let timerInterval = null;
    let gameStarted = false;
    let isPaused = false;

    const wordInput = document.getElementById("word-input");
    const currentWordSpan = document.getElementById("current-word");
    const requiredLengthSpan = document.getElementById("required-length");
    const messageDiv = document.getElementById("message");
    const alphabetDiv = document.getElementById("alphabet");
    const timerSpan = document.getElementById("timer");
    const progressBar = document.getElementById("progress-bar");
    const pauseBtn = document.getElementById("pause-btn");

    // Build alphabet buttons
    "ABCDEFGHIJKLMNOPQRSTUVWXYZ".split("").forEach(letter => {
      const btn = document.createElement("button");
      btn.textContent = letter;
      btn.id = `letter-${letter}`;
      alphabetDiv.appendChild(btn);
    });

    function showMessage(msg, color = "#d32f2f") {
      messageDiv.style.color = color;
      messageDiv.textContent = msg;
    }

    function updateDisplay() {
      currentWordSpan.textContent = currentWord || "None";
      requiredLengthSpan.textContent = requiredLength;
      wordInput.value = "";
    }

    function disableLetter(letter) {
      const btn = document.getElementById(`letter-${letter}`);
      if (btn && !usedLetters.includes(letter)) {
        btn.disabled = true;
        btn.classList.add("disabled");
        usedLetters.push(letter);
      }
    }

    function updateTimerDisplay() {
      timerSpan.textContent = timeLeft;
      progressBar.style.width = `${(timeLeft / 30) * 100}%`;
    }

    function startTimer() {
      clearInterval(timerInterval);
      timeLeft = 30;
      updateTimerDisplay();
      timerInterval = setInterval(() => {
        if (!isPaused) {
          timeLeft--;
          updateTimerDisplay();
          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            showMessage("⏰ Time's up! Game Over.");
            document.getElementById("submit-btn").disabled = true;
            wordInput.disabled = true;
          }
        }
      }, 1000);
    }

    document.getElementById("submit-btn").addEventListener("click", () => {
      const inputWord = wordInput.value.trim().toUpperCase();
      if (!inputWord) {
        showMessage("Please enter a word.");
        return;
      }
      if (!/^[A-Z]+$/.test(inputWord)) {
        showMessage("Only letters A-Z are allowed.");
        return;
      }

      const inputLen = inputWord.length;
      const firstLetter = inputWord[0];

      if (!gameStarted) {
        if (inputLen !== 3) {
          showMessage("First word must be 3 letters long.");
          return;
        }
        currentWord = inputWord;
        requiredLength = 3;
        disableLetter(firstLetter);
        startTimer();
        gameStarted = true;
        showMessage(`Accepted "${inputWord}" as the first word.`, "#388e3c");
        updateDisplay();
        return;
      }

      const sameLetter = firstLetter === currentWord[0];
      const sameLength = inputLen === requiredLength;
      const diffLetterValid = !sameLetter && !usedLetters.includes(firstLetter) && inputLen === requiredLength + 1;

      if (sameLetter && sameLength) {
        currentWord = inputWord;
        showMessage(`Accepted "${inputWord}" (same letter/length)`, "#388e3c");
        startTimer();
        updateDisplay();
      } else if (diffLetterValid) {
        currentWord = inputWord;
        requiredLength++;
        disableLetter(firstLetter);
        showMessage(`Accepted "${inputWord}" (new letter / +1 length)`, "#1976d2");
        startTimer();
        updateDisplay();
      } else {
        showMessage("Invalid move! Must match first letter & length OR use new unused letter & be 1 letter longer.");
      }
    });

    pauseBtn.addEventListener("click", () => {
      isPaused = !isPaused;
      pauseBtn.textContent = isPaused ? "Play" : "Pause";
    });

    document.getElementById("new-game-btn").addEventListener("click", () => {
      currentWord = "";
      requiredLength = 3;
      usedLetters = [];
      gameStarted = false;
      isPaused = false;
      clearInterval(timerInterval);
      timeLeft = 30;
      updateTimerDisplay();
      wordInput.disabled = false;
      document.getElementById("submit-btn").disabled = false;
      pauseBtn.textContent = "Pause";
      document.querySelectorAll("#alphabet button").forEach(btn => {
        btn.disabled = false;
        btn.classList.remove("disabled");
      });
      showMessage("Game reset!", "#000");
      updateDisplay();
    });

    // Initialize
    updateDisplay();
    updateTimerDisplay();
  </script>
</body>
</html>
