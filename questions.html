<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1001 Conversation Questions</title>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;700&family=DM+Sans:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --background: #ffffff;
            --foreground: #475569;
            --card: #ecfeff;
            --card-foreground: #164e63;
            --popover: #ffffff;
            --popover-foreground: #475569;
            --primary: #164e63;
            --primary-foreground: #ffffff;
            --secondary: #f59e0b;
            --secondary-foreground: #ffffff;
            --muted: #f8fafc;
            --muted-foreground: #374151;
            --accent: #f59e0b;
            --accent-foreground: #ffffff;
            --destructive: #dc2626;
            --destructive-foreground: #ffffff;
            --border: #e5e7eb;
            --input: #f1f5f9;
            --ring: rgba(22, 78, 99, 0.5);
            --radius: 0.5rem;
        }

        .dark {
            --background: #0f172a;
            --foreground: #e2e8f0;
            --card: #1e293b;
            --card-foreground: #e2e8f0;
            --primary: #0ea5e9;
            --primary-foreground: #ffffff;
            --muted: #334155;
            --muted-foreground: #94a3b8;
            --border: #334155;
            --input: #334155;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background-color: var(--background);
            color: var(--foreground);
            line-height: 1.6;
            min-height: 100vh;
            transition: background-color 0.3s ease, color 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        header {
            background-color: var(--background);
            border-bottom: 1px solid var(--border);
            padding: 1.5rem 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        h1 {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 2rem;
            color: var(--primary);
        }

        .tagline {
            color: var(--muted-foreground);
            font-size: 0.875rem;
        }

        /* Added theme toggle button */
        .theme-toggle {
            background: none;
            border: 1px solid var(--border);
            color: var(--foreground);
            padding: 0.5rem;
            border-radius: var(--radius);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1.25rem;
            width: 2.5rem;
            height: 2.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-toggle:hover {
            background-color: var(--muted);
        }

        /* Added stopwatch styles */
        .header-controls {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .stopwatch-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background-color: var(--card);
            border: 1px solid var(--border);
            border-radius: var(--radius);
            padding: 0.5rem 1rem;
        }

        .stopwatch-display {
            font-family: 'Space Grotesk', monospace;
            font-weight: 700;
            font-size: 1rem;
            color: var(--primary);
            min-width: 4rem;
            text-align: center;
        }

        .stopwatch-btn {
            background: none;
            border: 1px solid var(--border);
            color: var(--foreground);
            padding: 0.25rem 0.5rem;
            border-radius: calc(var(--radius) - 2px);
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .stopwatch-btn:hover {
            background-color: var(--muted);
        }

        .stopwatch-btn.active {
            background-color: var(--primary);
            color: var(--primary-foreground);
        }

        main {
            padding: 2rem 0;
            /* Changed to full height layout with top/bottom split */
            height: calc(100vh - 200px);
            display: flex;
            flex-direction: column;
        }

        /* Updated layout to vertical split instead of horizontal grid */
        .app-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            gap: 2rem;
        }

        .categories-section {
            background-color: var(--card);
            border-radius: var(--radius);
            padding: 1.5rem;
            /* Changed from flex: 1 to fixed proportion - takes up top third */
            flex: 0 0 33%;
            overflow-y: auto;
        }

        .section-title {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--card-foreground);
            margin-bottom: 1rem;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 0.75rem;
        }

        .category-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem;
            border-radius: calc(var(--radius) - 2px);
            transition: background-color 0.2s ease;
            cursor: pointer;
        }

        .category-item:hover {
            background-color: var(--muted);
        }

        .category-checkbox {
            width: 1.25rem;
            height: 1.25rem;
            accent-color: var(--primary);
            cursor: pointer;
        }

        .category-label {
            font-weight: 500;
            color: var(--card-foreground);
            cursor: pointer;
            flex: 1;
        }

        .question-section {
            /* Changed from flex: 1 to take remaining two-thirds of screen */
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .question-card {
            background-color: var(--card);
            border-radius: var(--radius);
            padding: 3rem;
            /* Takes up most of the bottom section */
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            position: relative;
            /* Added min-height to prevent layout shifts during loading */
            min-height: 200px;
        }

        .question-text {
            /* Made question text much bigger and more prominent */
            font-size: 1.5rem;
            line-height: 1.6;
            color: var(--card-foreground);
            max-width: 100%;
            font-weight: 500;
            /* Added transition to smooth content changes */
            transition: opacity 0.2s ease;
        }

        .placeholder-text {
            color: var(--muted-foreground);
            font-style: italic;
            font-size: 1.25rem;
        }

        .generate-button {
            background-color: var(--primary);
            color: var(--primary-foreground);
            border: none;
            border-radius: var(--radius);
            padding: 1rem 2rem;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 2px 4px rgba(22, 78, 99, 0.2);
            align-self: center;
        }

        .generate-button:hover {
            background-color: #0f3a47;
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(22, 78, 99, 0.3);
        }

        .generate-button:disabled {
            background-color: var(--muted);
            color: var(--muted-foreground);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .controls {
            display: flex;
            gap: 1rem;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .select-all-btn, .clear-all-btn {
            background: none;
            border: 1px solid var(--border);
            color: var(--foreground);
            padding: 0.5rem 1rem;
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .select-all-btn:hover, .clear-all-btn:hover {
            background-color: var(--muted);
        }

        /* Added history section styles */
        .history-toggle {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: 1px solid var(--border);
            color: var(--card-foreground);
            padding: 0.5rem 1rem;
            border-radius: calc(var(--radius) - 2px);
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .history-toggle:hover {
            background-color: var(--muted);
        }

        .history-panel {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: var(--card);
            border-radius: var(--radius);
            padding: 2rem;
            display: none;
            flex-direction: column;
            gap: 1rem;
            overflow-y: auto;
        }

        .history-panel.show {
            display: flex;
        }

        .history-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
            padding-bottom: 1rem;
        }

        .history-title {
            font-family: 'Space Grotesk', sans-serif;
            font-weight: 700;
            font-size: 1.25rem;
            color: var(--card-foreground);
        }

        .close-history {
            background: none;
            border: none;
            color: var(--card-foreground);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 0.25rem;
        }

        .history-list {
            flex: 1;
            overflow-y: auto;
        }

        .history-item {
            padding: 1rem;
            border: 1px solid var(--border);
            border-radius: calc(var(--radius) - 2px);
            margin-bottom: 1rem;
            cursor: pointer;
            transition: background-color 0.2s ease;
        }

        .history-item:hover {
            background-color: var(--muted);
        }

        .history-category {
            font-size: 0.875rem;
            color: var(--muted-foreground);
            margin-bottom: 0.5rem;
        }

        .history-question {
            font-size: 1rem;
            color: var(--card-foreground);
        }

        .error-message {
            background-color: var(--destructive);
            color: var(--destructive-foreground);
            padding: 1rem;
            border-radius: var(--radius);
            text-align: center;
            margin-bottom: 1rem;
        }

        footer {
            background-color: var(--background);
            border-top: 1px solid var(--border);
            padding: 2rem 0;
            text-align: center;
            color: var(--muted-foreground);
            font-size: 0.875rem;
        }

        .loading {
            opacity: 0.6;
            pointer-events: none;
            /* Removed any transform that could cause jumping */
        }

        .fade-in {
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            main {
                height: calc(100vh - 160px);
            }
            
            .question-text {
                font-size: 1.25rem;
            }
            
            .categories-grid {
                grid-template-columns: 1fr;
            }
            
            .question-card {
                padding: 2rem;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div>
                    <h1>1001 Conversation Questions</h1>
                    <p class="tagline">Generate meaningful conversation starters from curated categories</p>
                </div>
                <!-- Added stopwatch controls beside theme toggle -->
                <div class="header-controls">
                    <div class="stopwatch-container">
                        <div class="stopwatch-display" id="stopwatchDisplay">00:00</div>
                        <button class="stopwatch-btn" id="stopwatchBtn" onclick="toggleStopwatch()">Start</button>
                        <button class="stopwatch-btn" onclick="resetStopwatch()">Reset</button>
                    </div>
                    <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark/light mode">
                        <span id="themeIcon">☀️</span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container">
            <!-- Changed layout to vertical split -->
            <div class="app-container">
                <div class="categories-section">
                    <h2 class="section-title">Select Categories</h2>
                    <div class="controls">
                        <button class="select-all-btn" onclick="selectAllCategories()">Select All</button>
                        <button class="clear-all-btn" onclick="clearAllCategories()">Clear All</button>
                    </div>
                    <div class="categories-grid" id="categoriesGrid">
                        <!-- Categories will be populated by JavaScript -->
                    </div>
                </div>

                <div class="question-section">
                    <div class="question-card">
                        <!-- Added history toggle button -->
                        <button class="history-toggle" onclick="toggleHistory()">History</button>
                        
                        <div class="question-text placeholder-text" id="questionDisplay">
                            Select one or more categories and click "Generate Question" to get started!
                        </div>
                        
                        <!-- Added history panel -->
                        <div class="history-panel" id="historyPanel">
                            <div class="history-header">
                                <h3 class="history-title">Question History</h3>
                                <button class="close-history" onclick="toggleHistory()">×</button>
                            </div>
                            <div class="history-list" id="historyList">
                                <p class="placeholder-text">No questions generated yet.</p>
                            </div>
                        </div>
                    </div>
                    <button class="generate-button" id="generateBtn" onclick="generateQuestion()">
                        Generate Question
                    </button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>Based on "The Complete Book of Questions" - Spark meaningful conversations</p>
        </div>
    </footer>

    <script>
        const questionsByCategory = {
            lightAndEasy: [
                "Do you squeeze the toothpaste tube or roll it? What’s the advantage of your method?",
                "How many siblings do you have? What’s your birth order?",
                "What’s something you’ve won and how did you win it?",
                "What’s one of your nicknames? What do you prefer to be called?",
                "What’s something your parents used to say to you as a child that you promised yourself you’d never say—but now you catch yourself saying all the time?",
                "What’s something you intended to do today, but didn’t? Why not?",
                "Using only one word per person, what was your first impression of each person present with you now?",
                "What’s something that people do in traffic that really bothers you?",
                "Who is the closest friend you’ve ever had? Describe that relationship.",
                "What books on your shelf are begging to be read?",
                "What room in your house best reflects your personality? Explain why.",
                "How often do you doodle? What do your doodles usually look like?",
                "What do you do if you can’t sleep at night? Do you count sheep, toss and turn, or get up and try to do something productive?",
                "Which do you do more often: hum or whistle? Hum or whistle your answer.",
                "What animal are you the most like? Why?",
                "How many days could you last in solitary confinement? How would you do it?",
                "Do you save old greeting cards and letters, or throw them all away? Why?",
                "On a scale of 1 to 10, how well do you sing?",
                "When you’re alone at home, do you wear shoes, socks, slippers, or go barefoot?",
                "What are the advantages and disadvantages of being your height?",
                "When was the last picnic you went on? Describe it.",
                "How many discount or savings coupons do you clip in an average month? How many expire before you use them?",
                "Who’s the biggest “pack rat” you know?",
                "Whose autographs have you collected?",
                "What’s something you should throw away, but can’t? Explain.",
                "What food items did you eat so far today?",
                "How often do you get a haircut? Describe your worst haircut.",
                "How particular are you about the maintenance of your car?",
                "Who’s the most famous person you have ever met? What famous person would you most like to meet?",
                "What is your most unusual nighttime or morning ritual?",
                "How often do you read your horoscope? Do you believe there’s any truth to it?",
                "What kinds of movies do you most enjoy? Why?",
                "When was the last time you stubbed your toe so hard it brought tears to your eyes?",
                "How do you get rid of pesky phone calls from telemarketers?",
                "What are you a “natural” at doing?",
                "What’s the story behind a time when you got locked out?",
                "When’s the last time you had to give a speech? How did it go?",
                "How often do you get sick?",
                "What’s something valuable that you accidentally dropped and broke? Describe the situation.",
                "What’s the first thing that comes to mind when you hear the word “fun”?",
                "At amusement parks, are you drawn more to the scariest roller coaster or the tamest merry-go-round? Why?",
                "When’s the last time you square-danced or line-danced? Rate your dancing ability on a scale of 1 to 10.",
                "What are some of the wildest animals you’ve ever touched?",
                "How many hours do you spend on your computer each day? How much time do you spend “surfing the Web”?",
                "What makes you tick?",
                "What has been your best work of art? Describe it.",
                "What is something mischievous you have done?",
                "When you leave a room, do you turn the lights off behind you or keep the lights on throughout your house most of the time? Explain your answer.",
                "What’s the worst tasting thing you’ve ever eaten?",
                "When talking to someone while standing, are your arms usually at your sides, in your pockets, crossed in front of you, or gesturing descriptively? Demonstrate your answer.",
                "What magazines do you subscribe to, and how many of those do you actually read or look through? Do you throw any of them away unread?",
                "Have you ever purchased anything from a telemarketer? If so, what was it? If not, why didn’t you?",
                "How frequently do you purchase lottery tickets or mail in sweepstakes registrations? Have you ever won anything from them?",
                "What’s the best New Year’s resolution you’ve ever made?",
                "When making an entrance into a social gathering, do you make your presence known so everyone notices you, slip in and look for someone you know, or sneak in as quietly as possible and find a safe spot to hide? Why?",
                "How many hours a week do you watch TV? Is that too little, too much, or just enough?",
                "What’s your favorite kind of candy?",
                "What’s your strongest sense?",
                "Are you most likely to finish your taxes as soon as you receive your W–2s or as close to April 15 as possible? How many times have you filed for an extension?",
                "What can your friends predict you will grumble about most?",
                "Do you prefer keeping the television channel remote in hand or giving it up? Why?",
                "How many times a day do you look at yourself in the mirror?",
                "When you travel, do you pack too much or too little? Explain.",
                "What’s the wackiest belief you held as a child?",
                "What’s your favorite beverage?",
                "What are the best steps you’ve ever taken in an effort to improve your health?",
                "When relaxing on the floor, do you sit cross-legged, fold your legs to one side, sit with your legs straight out in front of you, or recline?",
                "Have you ever been an audience member for any television shows? Which ones? For which ones would you like to be an audience member?",
                "What’s one fashion trend you hope never comes back? Which ones have come back that you wish hadn’t?",
                "What magic tricks do you know? Perform one now."
              ]
            personalProfile: [
                "Are you a hugger or a non-hugger? Why?",
                "What drives you crazy?",
                "Are you serious-minded or a jokester? Why?",
                "Are you more likely to avoid conflict or engage in it head-on? Why?",
                "What was the most recent compliment you received and savored?",
                "What’s something about yourself that you hope will change, but that probably never will?",
                "What’s something about yourself that you hope will never change?",
                "Are you a leader or a follower? How do you know?",
                "Are you more of a rule breaker or a rule keeper? Why?",
                "Would you describe yourself as an extrovert or an introvert? Give an example.",
                "Would you describe yourself as more of a feeler or a thinker? Why?",
                "Are you usually late, early, or on time? Why?",
                "What goals have you recently set for yourself, and how are you doing on them so far?",
                "To what degree are you patriotic? How do you express your patriotism?",
                "Are you a creature of habit? Explain your answer.",
                "In what situations are you most likely to procrastinate?",
                "What books have made a big impact on you?",
                "At what age do you hope to retire? Explain.",
                "How much of a bargain hunter are you? Explain.",
                "How much of a shopper are you? Where’s your favorite place to shop?",
                "Are you ever a high-maintenance person? Explain.",
                "When was the last time you really pushed yourself to your physical limits? Explain.",
                "What’s one of your hobbies?",
                "How much poetry have you written in your life?",
                "How do you typically react in a sudden, extreme, pressure-filled crisis?",
                "How do you go about illuminating “blind spots” in your life?",
                "How mechanically inclined do you consider yourself? Give an example.",
                "How many different conversations can you adequately carry on at the same time?",
                "Are you a person who has a whole lot of acquaintances or just a few very close friends? Why?",
                "How comfortable are you with uncertainty? Explain.",
                "On a scale of 1 to 10, how computer savvy are you? Explain.",
                "Are you superstitious? Give an example.",
                "What one word best describes your mother?",
                "What one word best describes your father?",
                "Do you have a collection? If so, what do you collect and why?",
                "When are you shy?",
                "Do you tend to save everything or toss everything? Why?",
                "What’s something you regret losing, selling, or giving away? Explain why.",
                "How absentminded do you get? Give an example.",
                "Which is better: your short-term or your long-term memory?",
                "What’s your idea of cute?",
                "Are you more inclined to “build your own empire” or “unleash the potential of others”? Explain.",
                "What do you take for granted the most?",
                "How often do you interrupt others while they are talking? Give a reason for your answer.",
                "When you have nothing pressing, where does your mind drift?",
                "What are your career goals?",
                "How competitive are you? Explain.",
                "Are you a penny-pincher or a big spender? Why?",
                "Would you describe yourself as more laid back or more intense? Why?",
                "Are you a risk taker? Why or why not?",
                "Do you care more about pleasing people or speaking the truth? Explain your answer.",
                "What inspires you to write?",
                "What big challenge have you taken on recently?",
                "When was the last time you wanted to scream? Explain.",
                "Do you ever double or triple check things? If so, what?",
                "What bores you?",
                "What’s someone’s idiosyncrasy that really bothers you?",
                "What’s an idiosyncrasy or strange habit that you have?",
                "On a scale of 1 to 10, how controlling a person are you? Explain.",
                "What bad habit do you wish you could break?",
                "On a scale of 1 to 10, how much of a perfectionist are you? Explain.",
                "What’s a strange occurrence you’ve observed but, until now, have never (or rarely) shared with anyone?",
                "Where do you think you spend most of your money?",
                "What do you think about more than anything else?",
                "What books are you reading these days?",
                "What allergies do you have?",
                "How tolerant a person are you?",
                "To what extent do others’ beliefs influence you? Why?",
                "To what degree do you consider yourself athletic? At which sports do you excel?",
                "What causes you to get flustered?",
                "At what time of the day do you feel your best?",
                "What time do you usually wake up in the morning? Do you awaken naturally or need an alarm?",
                "What fear would you like to overcome?",
                "When do you most feel like a slave to time?",
                "What do you consider your best quality?",
                "Are you more task oriented or people oriented? Why?",
                "How do you feel about your age?",
                "Is it more important to you to look good or feel good? Explain.",
                "What’s your idea of a good time?",
                "Are you a compulsive shopper or do you bring a list and carefully consider your purchases? Why?",
                "Who is the first person you tell when something good happens to you?",
                "Whom do you run to when something bad happens in your life?",
                "In what circumstances do your motor skills short-circuit your verbal skills, and vice versa?",
                "In what situations are you most uncomfortable?",
                "When are you the most at ease with yourself?",
                "How good are you at multitasking? Give an example.",
                "What do you do when you want to relax?",
                "Are you an early bird or a night owl? Why?",
                "What’s something that amazes you?",
                "Do you say “goodbye” quickly, slowly, or not at all? Why?",
                "What spells adventure for you?",
                "What tests the limits of your sense of balance?",
                "How much of a “people watcher” are you? In what places do you find yourself “people watching”?",
                "What do you like and dislike most about your current job?",
                "Whom do you call when you need a hand?",
                "What is your greatest physical challenge?",
                "Under what circumstances is it impossible for you to sleep?",
                "How do you best avoid conflict?",
                "How accident-prone are you? Describe a recent incident.",
                "What’s the most important thing about you?"
              ]
            "Preferences": [
                "What’s your favorite ice-cream brand and flavor?",
                "What’s your all-time favorite meal, and how often do you enjoy it?",
                "What’s your all-time favorite movie, and how many times have you seen it?",
                "What’s your dream job?",
                "What’s your all-time favorite book?",
                "What’s your favorite place to eat?",
                "What’s your favorite TV show?",
                "What’s your favorite holiday? Why?",
                "What’s your favorite time of day?",
                "What’s your favorite day of the week?",
                "What’s your favorite month of the year?",
                "What’s your favorite season of the year?",
                "What’s your favorite color?",
                "What’s your favorite sport to watch?",
                "What’s your favorite sport to play?",
                "What’s your favorite type of music?",
                "What’s your favorite song?",
                "What’s your favorite magazine?",
                "What’s your favorite newspaper?",
                "What’s your favorite store to shop at?",
                "What’s your favorite city?",
                "What’s your favorite country?",
                "What’s your favorite TV channel?",
                "What’s your favorite radio station?",
                "What’s your favorite website?",
                "What’s your favorite dessert?",
                "What’s your favorite fruit?",
                "What’s your favorite vegetable?",
                "What’s your favorite fast-food restaurant?",
                "What’s your favorite pizza topping?",
                "What’s your favorite candy?",
                "What’s your favorite flower?",
                "What’s your favorite tree?",
                "What’s your favorite kind of weather?",
                "What’s your favorite kind of sandwich?",
                "What’s your favorite breakfast food?",
                "What’s your favorite lunch?",
                "What’s your favorite dinner?",
                "What’s your favorite drink?",
                "What’s your favorite type of bread?",
                "What’s your favorite condiment?",
                "What’s your favorite kind of soup?",
                "What’s your favorite salad dressing?",
                "What’s your favorite kind of cookie?",
                "What’s your favorite cake?",
                "What’s your favorite kind of pie?",
                "What’s your favorite kind of cheese?",
                "What’s your favorite meat?",
                "What’s your favorite fish?",
                "What’s your favorite pasta dish?",
                "What’s your favorite ethnic food?",
                "What’s your favorite snack food?",
                "What’s your favorite amusement park ride?",
                "What’s your favorite board game?",
                "What’s your favorite card game?",
                "What’s your favorite video game?",
                "What’s your favorite toy as a child?",
                "What’s your favorite TV commercial?",
                "What’s your favorite cartoon character?",
                "What’s your favorite comic strip?",
                "What’s your favorite superhero?",
                "What’s your favorite clothing brand?",
                "What’s your favorite outfit?",
                "What’s your favorite pair of shoes?",
                "What’s your favorite accessory?",
                "What’s your favorite jewel or gem?",
                "What’s your favorite animal?",
                "What’s your favorite pet you’ve had?",
                "What’s your favorite zoo animal?",
                "What’s your favorite bird?",
                "What’s your favorite insect?",
                "What’s your favorite car?",
                "What’s your favorite mode of transportation?",
                "What’s your favorite vacation spot?",
                "What’s your favorite kind of hotel?",
                "What’s your favorite way to spend a day off?",
                "What’s your favorite chore?",
                "What’s your favorite way to exercise?",
                "What’s your favorite outdoor activity?",
                "What’s your favorite indoor activity?",
                "What’s your favorite subject in school?",
                "What’s your favorite teacher?",
                "What’s your favorite class you’ve ever taken?",
                "What’s your favorite memory from childhood?",
                "What’s your favorite way to spend time with friends?",
                "What’s your favorite way to spend time alone?",
                "What’s your favorite way to relax?",
                "What’s your favorite holiday tradition?",
                "What’s your favorite family activity?",
                "What’s your favorite household gadget?",
                "What’s your favorite app on your phone?",
                "What’s your favorite social media platform?",
                "What’s your favorite emoji?",
                "What’s your favorite smell?",
                "What’s your favorite sound?",
                "What’s your favorite taste?",
                "What’s your favorite texture?"
            ],
            "Blast from the Past": [
                "What’s one of your greatest achievements?",
                "What’s your favorite birthday memory?",
                "Who was your best friend in high school, and where is he or she now?",
                "What was your first job? How much did you get paid?",
                "What was your favorite subject in school?",
                "What was your least favorite subject in school?",
                "What was your favorite grade in school?",
                "What was your least favorite grade in school?",
                "Who was your favorite teacher? Why?",
                "Who was your least favorite teacher? Why?",
                "What was your favorite game as a child?",
                "What was your favorite toy as a child?",
                "What was your favorite cartoon as a child?",
                "What was your favorite TV show as a child?",
                "What was your favorite book as a child?",
                "What was your favorite food as a child?",
                "What was your least favorite food as a child?",
                "What was your favorite holiday as a child?",
                "What was your favorite family tradition as a child?",
                "What was your favorite vacation as a child?",
                "What was your favorite place to go as a child?",
                "What was your favorite thing to do as a child?",
                "What was your favorite hobby as a child?",
                "What was your favorite sport as a child?",
                "What was your favorite pet as a child?",
                "What was your favorite birthday gift?",
                "What was your favorite Christmas gift?",
                "What was your favorite Halloween costume?",
                "What was your favorite summer activity?",
                "What was your favorite winter activity?",
                "What was your favorite spring activity?",
                "What was your favorite fall activity?",
                "What was your favorite school trip?",
                "What was your favorite thing about high school?",
                "What was your least favorite thing about high school?",
                "What was your favorite memory from college?",
                "What was your least favorite memory from college?",
                "Who was your childhood hero?",
                "Who was your childhood crush?",
                "Who was your childhood best friend?",
                "What was your childhood dream job?",
                "What was your first pet?",
                "What was your first car?",
                "What was your first home like?",
                "What was your first kiss like?",
                "What was your first concert?",
                "What was your first date?",
                "What was your first job interview like?",
                "What was your first paycheck used for?",
                "What was your first trip away from home?",
                "What was your first plane ride?",
                "What was your first train ride?",
                "What was your first bus ride?",
                "What was your first bicycle?",
                "What was your first computer?",
                "What was your first cell phone?",
                "What was your first email address?",
                "What was your first social media account?",
                "What was your first photograph?",
                "What was your first award?",
                "What was your first trophy?",
                "What was your first medal?",
                "What was your first certificate?",
                "What was your first time moving to a new city?",
                "What was your first day of school like?",
                "What was your first teacher’s name?",
                "What was your first nickname?",
                "What was your first fight?",
                "What was your first friend’s name?",
                "What was your first sleepover?",
                "What was your first camping trip?",
                "What was your first fishing trip?",
                "What was your first sports game?",
                "What was your first team?",
                "What was your first coach like?",
                "What was your first job responsibility?",
                "What was your first paycheck?",
                "What was your first mentor like?",
                "What was your first big purchase?",
                "What was your first bank account?",
                "What was your first credit card?",
                "What was your first loan?",
                "What was your first apartment like?",
                "What was your first roommate like?",
                "What was your first boss like?",
                "What was your first promotion?",
                "What was your first big mistake?",
                "What was your first success?",
                "What was your first leadership role?",
                "What was your first time public speaking?",
                "What was your first time performing?",
                "What was your first award ceremony?",
                "What was your first graduation like?",
                "What was your first time feeling independent?",
                "What was your first big trip?"
            ],
            "Just Imagine": [
                "If you could be invisible for a day, what would you do?",
                "If you could eliminate one weakness or limitation in your life, what would it be?",
                "If you could change anything about your relationship with your parents, what would it be?",
                "If you were able to switch job responsibilities with your boss, would you do it? Why or why not?",
                "If you were able to retrieve only one item on the way out of your burning home, what would that be? Explain.",
                "If you could go back in time, what year would you visit? Why?",
                "If you could go anywhere for a one-day visit, where would you go? Why?",
                "If you could spend one hour doing absolutely anything, what would you do?",
                "If you had the opportunity to travel into space, would you go? Why or why not?",
                "If you had an unlimited shopping spree at only one store, which one would you choose? Why?",
                "If you could play any instrument, what would you choose? Why?",
                "If you could talk with only one person for the rest of your life, who would it be and why?",
                "If you could visit with any person in history, who would it be and why?",
                "If you could do something very daring without fear, what would you do?",
                "If you could take an early retirement, what would you do?",
                "If you had the chance to go anywhere for dinner tomorrow, where would you go? Why?",
                "If you were assured you would not fail, what endeavor would you attempt?",
                "If you could be any celebrity, who would you want to become? Why?",
                "If you won a million dollars in the lottery, how would you spend it?",
                "If you could learn to speak a foreign language, which one would you choose and why?"
            ],
            "Viewpoints": [
                "What does 'success' mean to you?",
                "Do you think there will ever be world peace? Why or why not?",
                "What’s the secret to a long life?",
                "Which is the greater tragedy: an innocent person imprisoned or a guilty person set free? Explain.",
                "How important is it to set personal goals?",
                "Are people trustworthy? Explain your answer.",
                "What is beauty?",
                "Why do you think people live in denial?",
                "What new law is needed to make the world a better place to live?",
                "How would you describe the perfect day?",
                "In your opinion, what is the moral condition of this world?",
                "Why do you think divorce is so prevalent?",
                "What is the ideal age to get married? Why?",
                "To what extent is knowledge power, to what extent is truth power, and what’s the difference?",
                "Do you believe that the human soul is eternal?",
                "What is the greatest invention the world has ever seen?",
                "What do you think is needed to make the world a better place?",
                "What advice can you give about how to conquer fear?",
                "What advice can you give about how to relieve stress?",
                "Why are some people cruel and unkind?",
                "What is the difference between knowing a lot of facts about a person and knowing someone personally?",
                "What do you think is the secret to a happy marriage?",
                "Why do innocent people suffer?",
                "Why do bad things happen to good people?",
                "Do you believe that, for the most part, people are basically good, basically bad, or a mixture? Why?",
                "Is seeking truth a way of life or a season of life? Explain.",
                "Do you believe ignorance is bliss? Why or why not?",
                "Why do you think it’s so hard for people to say they’re sorry?",
                "When does the end justify the means?",
                "What do you think is the greatest problem of the human race?",
                "Why are bad habits so hard to break?",
                "Whom do you consider the greatest president of all time? Why?",
                "What is truth?",
                "What’s more important, a healthy mind or a healthy body? Why?",
                "What makes a true friendship?",
                "Does life imitate art or does art imitate life? Explain.",
                "What is 'unconditional forgiveness'?",
                "To what extent is it possible to show respect or tolerance and still disagree?",
                "What does it mean when two people are said to have 'chemistry'?",
                "Do you think science will offer the “final answer” to all the world’s problems? Why or why not?",
                "To what extent is cloning a moral issue? Explain.",
                "When is it better to be safe than sorry?",
                "What does it mean to be powerful?",
                "What is the benefit of meditation?",
                "Why is it sometimes hard to forgive others?",
                "What’s most intriguing about the Cinderella story?",
                "How well do you receive criticism from others? Why do most people fear honest feedback and evaluation?",
                "What does this quote mean? 'He is no fool who gives what he cannot keep, to gain what he cannot lose.' (Jim Elliot)",
                "What’s the best approach for resolving conflict?",
                "Which is more important: what you say or how you say it? Explain your answer.",
                "Do you think a sixth sense exists? Explain.",
                "Do you think the end or the means is most important? Explain.",
                "When is it appropriate to resort to making a threat? When is a threat not a threat?",
                "What role does trust play in our everyday relationships?",
                "What’s the best way to earn another person’s respect?",
                "When is it necessary to take the law into your own hands?",
                "What is the basis of your standard of right and wrong?",
                "What’s the best way to win back an estranged friend?",
                "What’s the best way to resist peer pressure?",
                "Which is greater, love of one’s parents, one’s children, one’s spouse, or one’s friends? Explain your answer.",
                "What do you think is the most significant event in the history of the human race? Explain.",
                "How would you define “freedom”?",
                "What are the best ways to inspire or motivate people?",
                "What’s the best way to delegate things to others?",
                "In raising children, do you think it’s best to discipline by giving timeouts, discussions, spankings, or a combination? Why?",
                "What’s the best way to negotiate a raise in salary?",
                "Where do you draw the line between helping people and showing them how to help themselves? How do you strike that balance?",
                "What’s a sure way to detect when someone is lying?",
                "How do you measure contentment?",
                "Why do some people resist living lives of moral integrity?",
                "What’s the best way to handle another person’s hostility and ease tensions?",
                "How important is physical appearance when it comes to achieving success or getting one’s way in life?",
                "Is cloning a sign of progress? Why or why not?",
                "What’s the age of accountability?",
                "What is the secret to being content in all circumstances?",
                "Who’s the greatest leader of all time? Why?",
                "Does work really banish three great evils— boredom, vice, and poverty? Explain."
            ],
            "Hard-Hitting": [
              "What’s one thing you can’t believe you’re going to have to go to your grave not having done?",
              "When is it a good time to say, “I told you so”?",
              "Why do so many of us desire to be more than average? What’s wrong with being average?",
              "If you could relive a moment in your life, what would it be?",
              "When is it easier to beg for forgiveness than to ask for permission?",
              "What’s a bad day at work like for you?",
              "To what extent can you control your future?",
              "When do you think you’ll die?",
              "How do you think your life will end?",
              "What do you think is the saddest song ever written?",
              "What does it mean to be “rich”?",
              "When is it important to “be your own man”?",
              "What’s one of the biggest “myths” of all time?",
              "If you could have a face-to-face conversation with any person who has died, whom would you choose? What would you talk about?",
              "How do you feel about death?",
              "What do you think happens after we die?",
              "What one word best describes the world today?",
              "Do you believe in ghosts? Why or why not?",
              "What’s the best advice you’ve ever received?",
              "What is your ultimate goal in life?",
              "If you had to die tomorrow, what would you do today?",
              "Have you ever been on a diet? If so, which one? How did it go?",
              "How long is a moment?",
              "What’s the worst lie you’ve ever told?",
              "Do you think it’s possible to change who you are? Why or why not?",
              "If you knew you were going to die in one week, what would you do during that time?",
              "What is the most beautiful thing you have ever seen?",
              "Do you believe a person can have more than one love of his or her life? Explain.",
              "If you were to create a new holiday, what would it be and how would it be celebrated?",
              "What are the best and worst things about the current decade?",
              "If you were to write a movie script, what would it be about?",
              "What’s something you’ve always wanted to do but haven’t? What are you waiting for?",
              "Do you think that you have a purpose? If so, what is it?",
              "What do you think is the greatest challenge you will face in your life?",
              "When you get married, who will you invite?",
              "What’s one of your secrets?",
              "Have you ever broken the law? If so, what happened?",
              "Are you more interested in having a long life or a significant life? Why?",
              "Do you have a personal “code of ethics”?",
              "If you were to be put on trial for a crime you didn’t commit, whom would you want as your defense attorney? Why?",
              "What do you think you need more of in your life?",
              "When is it time to let go?",
              "What’s the most difficult thing you’ve had to do?",
              "What is one of the biggest misconceptions about you?",
              "Which do you prefer to have in your life: order or spontaneity? Why?",
              "Who are some people in your life who have made an unforgettable impact on you? Explain.",
              "What do you want your life to look like five years from now?",
              "If you could be famous for something, what would it be?",
              "What do you consider your greatest accomplishment?",
              "What’s the most courageous thing you have ever done?"
            ],
            "From the Heart": [
              "What objects from your childhood have you saved? Explain why.",
              "Are you ever satisfied? Why or why not?",
              "Do you use the word “love” freely and often or selectively and seldom? Explain why.",
              "What’s weighing heavy on your heart these days?",
              "What do you do when a homeless person asks you for money? How do you feel afterward?",
              "When you are happy, how do you like to celebrate?",
              "How self-centered are you?",
              "When have you had a cathartic experience and what was the impetus?",
              "Is it better to love or be loved? Why?",
              "Do you believe in “love at first sight”? Why or why not?",
              "Do you believe in “soul mates”? Why or why not?",
              "How is your love for your friends different from your love for your family?",
              "What recent disappointment have you had?",
              "When is the right time to demonstrate “tough love”?",
              "Is there someone in your life who has never (or rarely) let you down? How long have you known this person?",
              "When do you feel insecure?",
              "To what extent do you trust your own judgment or gut instincts? Why?",
              "What worries you?",
              "How do you heal a broken heart?",
              "Who have you loved more than anyone else in your life? Explain.",
              "What do you want?",
              "When was the last time your heart skipped a beat? Describe the situation.",
              "When have you felt like you could “never repay” someone? Explain.",
              "What does silence feel like to you?",
              "What makes you cry?",
              "When was the last time you were hurt?",
              "Do you think it’s possible to be in love with more than one person at the same time? Explain.",
              "Is it important to you to have children? Why or why not?",
              "When you are sad, what do you do to cheer up?",
              "Do you consider yourself a good gift giver?",
              "When have you given a great gift?",
              "What is your greatest regret?",
              "What’s a recent challenge you’ve faced and overcome?",
              "When was the last time you cried for joy? Describe it.",
              "What makes you feel peaceful?",
              "What do you do for fun?",
              "Do you prefer to be the center of attention or remain unnoticed? Explain.",
              "When have you been in a state of “awe”? Describe it.",
              "When was the last time you felt like a child? Describe it.",
              "How do you express gratitude?",
              "What’s one thing you’ve done that you hope no one ever finds out about?",
              "What do you most admire about your parents’ marriage?",
              "What do you admire about your parents as individuals?",
              "What’s your best advice for living a happy life?",
              "What have you learned from your past mistakes?",
              "How do you deal with your biggest disappointments?",
              "When did you realize that you were truly an adult?",
              "What’s one of the biggest “secrets” you’ve kept?",
              "Who makes you feel safe?",
              "How important are your feelings in your decision-making process?",
              "Who in your life do you see as your greatest confidant?",
              "What’s something you’ve given a lot of thought to recently?",
              "When was a time you let someone down?",
              "How do you express affection for another person?",
              "How have you most hurt another person in your life? Explain.",
              "What does the word “commitment” mean to you?",
              "What’s your definition of success?",
              "What’s one of your most treasured possessions? Why is it so special to you?",
              "What makes you feel significant?",
              "What does it mean to be a “good friend”?",
              "What’s the most compassionate thing you have ever done?",
              "What’s the most selfish thing you have ever done?",
              "What’s the best way to get over an argument with a friend?"
            ],
            "Spiritually Speaking": [
              "Do you believe that a spiritual realm exists outside of what can be perceived by the five senses? Why or why not?",
              "How would you define “faith”?",
              "Should faith in God be “blind” or should it require evidence? Explain.",
              "What does it mean to take a “leap of faith”? Have you ever taken one?",
              "Do you believe it is possible to encounter God in a personal way? Why or why not?",
              "What, if anything, is the Bible good for?",
              "What determines how much trust you will place in a spiritual authority?",
              "Do you think a person, in order to be a certain religion, must be converted into that religion, born into it, or both?",
              "How much influence has your family heritage had on your ultimate religious beliefs? Explain.",
              "What is it that bothers you the most about religious fanatics?",
              "What are the best reasons to believe in God?",
              "How do you know what to believe?",
              "If you could ask God any one question, what would it be?",
              "What do you think is a good reason to join a church?",
              "What do you think is the best way to live a fulfilled life?",
              "What’s the difference between a person who is spiritual and one who is religious?",
              "What’s your understanding of the Christian concept of grace?",
              "What, if any, part does karma play in your life? Explain.",
              "What is God like?",
              "What’s one of the biggest “turns-offs” when it comes to religion or spirituality?",
              "Do you believe in divine justice? Explain.",
              "In your opinion, is it important to live a life of good deeds? Why or why not?",
              "What’s the best way to forgive someone who has really let you down?",
              "What do you think is a good reason to go to hell?",
              "What, in your opinion, does it take to get to heaven?",
              "How do you react to a religious person who attempts to proselytize you?",
              "How do you define a cult?",
              "Can anyone know for sure that his or her religion is right? Explain.",
              "What is your definition of a miracle?",
              "If a bona fide miracle were to occur in your life, do you think that would convince you that some kind of intelligent Supreme Being exists? Why or why not?",
              "Why do you think most people find it difficult, if not impossible, to believe in miracles?",
              "Do you think angels and demons exist? Why or why not?",
              "What do you think angels are like, and what is their function here on earth?",
              "Do you believe you have a guardian angel?",
              "What is the greatest commandment?",
              "What is the greatest sin?",
              "How do you deal with your sins or shortcomings?",
              "How do you feel about the biblical saying, 'Judge not'?",
              "Is it possible to have a spiritual life outside of organized religion?",
              "What is the purpose of prayer?",
              "How often do you pray?",
              "What do you pray about?",
              "What is the difference between a religious person and a spiritual person?",
              "Have you ever experienced a “spiritual awakening”? Explain.",
              "How does the spiritual side of your life affect your daily living?",
              "When is it a good time to fast?",
              "When do you feel the closest to God?",
              "Why do you think some people are drawn to religious cults?",
              "What is the biblical purpose for fasting?",
              "What’s your definition of a good person?",
              "How can a person know if he or she is a good person?",
              "What is the most beautiful passage from a sacred text?",
              "What’s the worst thing you can say to someone who has lost a loved one?",
              "According to your understanding, how would you summarize the central message of Christianity?",
              "What’s something most of your friends don’t know about your spiritual side?",
              "What do you think God would say to you right now?",
              "What do you think God will say to you when you die?",
              "Why do you think Jesus was born? Why were you born?",
              "What’s one thing about the existence (or nonexistence) of God that scares you?",
              "The Bible says, 'God is love.' What does that mean to you?"
            ],
            "Extreme Spiritual Matters": [
              "Who is Jesus Christ to you?",
              "In a sentence, what would you say about the Christian concept of Jesus’ resurrection?",
              "What is your understanding of the Trinity (God the Father, God the Son, and God the Holy Spirit)?",
              "Do you think the Christian view of heaven and hell is fair? Why or why not?",
              "Is the Christian faith too exclusive? Why or why not?",
              "In your opinion, what is the best case for the existence of God?",
              "Is the Christian message mostly “good news” or mostly “bad news”? Explain.",
              "What does the concept of eternal damnation mean to you?",
              "How does it make you feel to know that some people believe you are going to go to hell?",
              "What’s one thing you would change about the Christian faith?",
              "Do you think the Bible is the inerrant Word of God, a divinely inspired book written by men, or a human book without divine inspiration?",
              "If you were face-to-face with Jesus, what would he say to you? Give a reason for your answer.",
              "Can hell, God’s justice, and God’s love all be real at the same time? Explain your answer.",
              "How comfortable would you feel about praying out loud with someone? Why?",
              "How do you distinguish God’s voice from your own thoughts?",
              "What miracle do you wish God would perform right now?",
              "What’s one doubt you have regarding the existence of a Supreme Being?",
              "What would Jesus do if he were in your shoes?",
              "When have you experienced the closest thing to a miracle? Describe it.",
              "If you were to identify someone as a Christian, what definitive factors would you look for to support that claim?",
              "Have you ever meditated for spiritual purposes? If so, describe your experience.",
              "Have you ever been baptized? What does the sacrament of baptism mean to you?",
              "How do you “feed your spirit”?",
              "What’s the closest you’ve come to having an encounter with God? Describe it.",
              "To what extent is your view of God influenced by your view of your father?",
              "For what are you most thankful to God?",
              "In your opinion, is the Christian message mostly “good news” or mostly “bad news”? Explain your response.",
              "When was a prayer of yours answered? Tell about it.",
              "When have you felt most at peace?",
              "What does the word “worship” mean to you?",
              "How do you feel about the concept of predestination?",
              "What do you think is the best way to develop a person’s prayer life?",
              "How do you think we can best live in light of Jesus’ imminent return?",
              "Do you believe that God speaks to people today? If so, how?",
              "In your opinion, what is the best proof of God’s existence?",
              "When have you been in an awesome state of “I don’t know”?",
              "What’s the greatest lie ever told?",
              "Do you think there will be some people in hell who wanted to go to heaven, but didn’t?",
              "When have you been in a place where you sensed a divine presence?",
              "How would you live your life differently if you had irrefutable proof of God’s existence?",
              "When did you realize that there’s more to life than just “the here and now”?",
              "How do you feel about the Bible’s account of creation?",
              "What, in your opinion, would it take for a global spiritual revival to take place?",
              "Why do you think so many people seem to have a problem with the Christian idea of a 'personal relationship' with Jesus?",
              "What’s the one question about God that you still want to get answered?"
            ]
        };

        let selectedCategories = new Set();
        let questionHistory = [];
        
        let stopwatchInterval = null;
        let stopwatchTime = 0;
        let isStopwatchRunning = false;

        function toggleTheme() {
            const body = document.body;
            const themeIcon = document.getElementById('themeIcon');
            
            if (body.classList.contains('dark')) {
                body.classList.remove('dark');
                themeIcon.textContent = '☀️';
                localStorage.setItem('theme', 'light');
            } else {
                body.classList.add('dark');
                themeIcon.textContent = '🌙';
                localStorage.setItem('theme', 'dark');
            }
        }

        function toggleHistory() {
            const historyPanel = document.getElementById('historyPanel');
            historyPanel.classList.toggle('show');
        }

        function displayHistoryQuestion(category, question) {
            const questionDisplay = document.getElementById('questionDisplay');
            const cleanQuestion = cleanQuestionText(question);
            
            questionDisplay.classList.remove('placeholder-text');
            questionDisplay.innerHTML = `<strong>Category:</strong> ${category}<br><br>${cleanQuestion}`;
            toggleHistory(); // Close history panel
        }

        function updateHistoryDisplay() {
            const historyList = document.getElementById('historyList');
            
            if (questionHistory.length === 0) {
                historyList.innerHTML = '<p class="placeholder-text">No questions generated yet.</p>';
                return;
            }
            
            historyList.innerHTML = questionHistory.map((item, index) => `
                <div class="history-item" onclick="displayHistoryQuestion('${item.category}', '${item.question.replace(/'/g, "\\'")}')">
                    <div class="history-category">${item.category}</div>
                    <div class="history-question">${cleanQuestionText(item.question)}</div>
                </div>
            `).reverse().join('');
        }

        function initializeApp() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark') {
                document.body.classList.add('dark');
                document.getElementById('themeIcon').textContent = '🌙';
            }

            const categoriesGrid = document.getElementById('categoriesGrid');
            const categories = Object.keys(questionsByCategory);
            
            categories.forEach(category => {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'category-item';
                categoryItem.onclick = () => toggleCategory(category);
                
                categoryItem.innerHTML = `
                    <input type="checkbox" class="category-checkbox" id="cat-${category}" onchange="toggleCategory('${category}')">
                    <label class="category-label" for="cat-${category}">${category}</label>
                `;
                
                categoriesGrid.appendChild(categoryItem);
            });
        }

        function toggleCategory(category) {
            const checkbox = document.getElementById(`cat-${category}`);
            
            if (selectedCategories.has(category)) {
                selectedCategories.delete(category);
                checkbox.checked = false;
            } else {
                selectedCategories.add(category);
                checkbox.checked = true;
            }
            
            updateGenerateButton();
        }

        function selectAllCategories() {
            const categories = Object.keys(questionsByCategory);
            categories.forEach(category => {
                selectedCategories.add(category);
                document.getElementById(`cat-${category}`).checked = true;
            });
            updateGenerateButton();
        }

        function clearAllCategories() {
            selectedCategories.clear();
            const checkboxes = document.querySelectorAll('.category-checkbox');
            checkboxes.forEach(checkbox => checkbox.checked = false);
            updateGenerateButton();
        }

        function updateGenerateButton() {
            const generateBtn = document.getElementById('generateBtn');
            generateBtn.disabled = selectedCategories.size === 0;
        }

        function generateQuestion() {
            if (selectedCategories.size === 0) {
                showError('Please select at least one category first!');
                return;
            }

            const questionDisplay = document.getElementById('questionDisplay');
            const generateBtn = document.getElementById('generateBtn');
            
            generateBtn.disabled = true;
            generateBtn.textContent = 'Generating...';
            
            setTimeout(() => {
                // Get random category from selected ones
                const categoriesArray = Array.from(selectedCategories);
                const randomCategory = categoriesArray[Math.floor(Math.random() * categoriesArray.length)];
                
                // Get random question from that category
                const questions = questionsByCategory[randomCategory];
                const randomQuestion = questions[Math.floor(Math.random() * questions.length)];
                
                questionHistory.push({
                    category: randomCategory,
                    question: randomQuestion,
                    timestamp: new Date()
                });
                updateHistoryDisplay();
                
                // Clean up the question text
                const cleanQuestion = cleanQuestionText(randomQuestion);
                
                questionDisplay.classList.remove('placeholder-text');
                questionDisplay.innerHTML = `<strong>Category:</strong> ${randomCategory}<br><br>${cleanQuestion}`;
                
                generateBtn.disabled = false;
                generateBtn.textContent = 'Generate Question';
            }, 300); // Reduced timeout to make it feel more responsive
        }

        function cleanQuestionText(text) {
            return text
                .replace(/\\n/g, ' ')
                .replace(/\n/g, ' ')
                .replace(/\s+/g, ' ')
                .replace(/\?\s*\?/g, '?')
                .replace(/\.\s*\./g, '.')
                .replace(/\s*\?\s*Why\?/g, '? Why?')
                .replace(/\s*\?\s*Explain\./g, '? Explain.')
                .replace(/\s*\?\s*Describe/g, '? Describe')
                .trim();
        }

        function showError(message) {
            const questionDisplay = document.getElementById('questionDisplay');
            questionDisplay.innerHTML = `<div class="error-message">${message}</div>`;
            setTimeout(() => {
                questionDisplay.innerHTML = '<div class="placeholder-text">Select one or more categories and click "Generate Question" to get started!</div>';
            }, 3000);
        }

        function toggleStopwatch() {
            const stopwatchBtn = document.getElementById('stopwatchBtn');
            
            if (isStopwatchRunning) {
                // Stop the stopwatch
                clearInterval(stopwatchInterval);
                stopwatchBtn.textContent = 'Start';
                stopwatchBtn.classList.remove('active');
                isStopwatchRunning = false;
            } else {
                // Start the stopwatch
                stopwatchInterval = setInterval(updateStopwatch, 1000);
                stopwatchBtn.textContent = 'Stop';
                stopwatchBtn.classList.add('active');
                isStopwatchRunning = true;
            }
        }

        function resetStopwatch() {
            clearInterval(stopwatchInterval);
            stopwatchTime = 0;
            isStopwatchRunning = false;
            
            const stopwatchBtn = document.getElementById('stopwatchBtn');
            const stopwatchDisplay = document.getElementById('stopwatchDisplay');
            
            stopwatchBtn.textContent = 'Start';
            stopwatchBtn.classList.remove('active');
            stopwatchDisplay.textContent = '00:00';
        }

        function updateStopwatch() {
            stopwatchTime++;
            const minutes = Math.floor(stopwatchTime / 60);
            const seconds = stopwatchTime % 60;
            
            const stopwatchDisplay = document.getElementById('stopwatchDisplay');
            stopwatchDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // Initialize the app when the page loads
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>
</html>

