<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEFL Score Calculator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 500px;
            width: 100%;
        }

        h1 {
            text-align: center;
            color: #2d3748;
            margin-bottom: 30px;
            font-size: 28px;
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 24px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
            font-size: 14px;
        }

        select, input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.2s;
            background: white;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        button {
            width: 100%;
            padding: 14px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s;
            margin-top: 8px;
        }

        button:hover {
            background: #5a67d8;
        }

        button:disabled {
            background: #a0aec0;
            cursor: not-allowed;
        }

        .results {
            background: #f7fafc;
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            border-left: 4px solid #48bb78;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding: 8px 0;
        }

        .score-item:last-child {
            margin-bottom: 0;
            padding-top: 16px;
            border-top: 2px solid #e2e8f0;
            font-weight: 700;
            font-size: 18px;
            color: #2d3748;
        }

        .error {
            color: #e53e3e;
            font-size: 14px;
            margin-top: 4px;
        }

        .actions {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .actions button {
            flex: 1;
            margin-top: 0;
        }

        .btn-secondary {
            background: #718096;
        }

        .btn-secondary:hover {
            background: #4a5568;
        }

        .hidden {
            display: none;
        }

        .step {
            margin-bottom: 24px;
        }

        .step-title {
            color: #2d3748;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TOEFL Score Calculator</h1>
        
        <!-- Test Selection Step -->
        <div id="testSelection" class="step">
            <div class="step-title">Select Test Type</div>
            <div class="form-group">
                <label for="testType">Choose your TOEFL test:</label>
                <select id="testType">
                    <option value="">Select a test...</option>
                    <option value="rta">Advanced 1</option>
                    <option value="rtb">Advanced 2</option>
                    <option value="rtc">Advanced 2</option>
                    <option value="rtd">Advanced 4</option>
                </select>
            </div>
            <button onclick="selectTest()">Continue</button>
        </div>

        <!-- Score Input Step -->
        <div id="scoreInput" class="step hidden">
            <div class="step-title">Enter Your Correct Answers</div>
            
            <div class="form-group">
                <label for="listening">Listening questions correct (0-50):</label>
                <input type="number" id="listening" min="0" max="50" placeholder="Enter number of correct answers">
                <div id="listeningError" class="error hidden">Please enter a number between 0 and 50</div>
            </div>

            <div class="form-group">
                <label for="structure">Structure questions correct (0-40):</label>
                <input type="number" id="structure" min="0" max="40" placeholder="Enter number of correct answers">
                <div id="structureError" class="error hidden">Please enter a number between 0 and 40</div>
            </div>

            <div class="form-group">
                <label for="reading">Reading questions correct (0-50):</label>
                <input type="number" id="reading" min="0" max="50" placeholder="Enter number of correct answers">
                <div id="readingError" class="error hidden">Please enter a number between 0 and 50</div>
            </div>

            <button onclick="calculateScore()">Calculate Score</button>
            <button onclick="backToTestSelection()" class="btn-secondary">Back to Test Selection</button>
        </div>

        <!-- Results Step -->
        <div id="results" class="step hidden">
            <div class="step-title">Your TOEFL Scores</div>
            
            <div class="results">
                <div class="score-item">
                    <span>Listening Score:</span>
                    <span id="listeningScore">-</span>
                </div>
                <div class="score-item">
                    <span>Structure Score:</span>
                    <span id="structureScore">-</span>
                </div>
                <div class="score-item">
                    <span>Reading Score:</span>
                    <span id="readingScore">-</span>
                </div>
                <div class="score-item">
                    <span>Final TOEFL Score:</span>
                    <span id="finalScore">-</span>
                </div>
            </div>

            <div class="actions">
                <button onclick="calculateAnother()">Calculate Another</button>
                <button onclick="changeTest()" class="btn-secondary">Change Test</button>
            </div>
        </div>
    </div>

    <script>
        const testChoices = {
            'rta': [[23, 20, 20], [24, 20, 21], [25, 20, 22], [28, 21, 23], [26, 22, 23.5], [27, 23, 24], [28, 24, 25], [29, 25, 26], [30, 26, 27], [30, 27, 27], [31, 29, 28], [32, 31, 29], [33, 34, 30], [35, 36.5, 32], [37, 39, 34], [39, 40, 36], [40, 41.5, 37.5], [41, 43, 39], [42, 44, 40], [43, 45, 41], [44, 46, 42], [45, 47, 43], [45.5, 48, 44], [46, 49, 45], [47, 50, 46], [47.5, 50.5, 46.5], [48, 51, 47], [48, 52, 48], [48.5, 53, 49], [49, 54, 50], [50, 55, 50], [50.5, 56, 51], [51, 57, 52], [52, 58, 52], [52.5, 59, 52.5], [53, 60, 53], [54, 62, 54], [54.5, 65, 54.5], [55, 68, 55], [56, 68, 56], [56.5, 68, 57], [57, 0, 58], [58, 0, 58], [59, 0, 59], [60, 0, 60], [61, 0, 61], [62, 0, 62.5], [63, 0, 64], [64, 0, 65], [66, 0, 66], [68, 0, 67]],
            'rtb': [[24, 20, 21], [25, 20, 21.5], [26, 20, 22], [27, 21, 23], [27.5, 22, 24], [28, 23, 25], [29, 24, 26], [30, 25, 26.5], [31, 26, 27], [32, 27, 28], [33, 29, 29.5], [34, 31, 31], [35, 34, 33], [36.5, 36, 35], [38, 38, 37], [39, 40, 38], [40, 41.5, 39.5], [41, 43, 41], [42, 44, 42], [42.5, 45, 43], [43, 46, 44], [44, 47, 45], [44.5, 47.5, 45.5], [45, 48, 46], [46, 49, 47], [46.5, 50, 47.5], [47, 51, 48], [48, 52, 49], [48.5, 53, 49.5], [49, 54, 50], [49, 55, 51], [49.5, 56, 51.5], [50, 57, 52], [51, 58, 53], [51.5, 59, 53.5], [52, 60, 54], [53, 61, 54], [53.5, 64.5, 55], [54, 68, 56], [55, 68, 56], [56, 68, 57], [57, 0, 58], [57, 0, 58], [58, 0, 59], [59, 0, 60], [60, 0, 61], [61.5, 0, 62], [63, 0, 63], [64, 0, 65], [66, 0, 66], [68, 0, 67]],
            'rtc': [[25, 20, 20], [26, 20.5, 21], [27, 21, 22], [27, 22, 23], [28, 23, 23.5], [29, 24, 24], [30, 25, 25], [31, 26, 26], [32, 27, 27], [33, 28, 27], [34, 30.5, 28], [35, 33, 29], [33, 36, 31], [34, 37.5, 32.5], [35, 39, 34], [40, 41, 36], [41, 42, 37.5], [42, 43, 39], [43, 44, 40], [43.5, 45, 41], [44, 46, 42], [44, 47, 43], [45, 48, 44], [46, 49, 45], [46, 50, 46], [46.5, 51, 47], [47, 52, 48], [48, 52, 48], [48.5, 53, 49], [49, 54, 50], [49, 55, 50], [49.5, 56, 51], [50, 57, 52], [51, 58, 52], [51.5, 59.5, 53], [52, 61, 54], [53, 62, 54], [53.5, 64.5, 55], [54, 68, 56], [55, 68, 56], [55.5, 68, 57], [56, 0, 58], [57, 0, 59], [58, 0, 60], [59, 0, 61], [60, 0, 62], [61.5, 0, 63], [63, 0, 65], [64, 0, 66], [66, 0, 66.5], [68, 0, 67]],
            'rtd': [[24, 20, 20], [25, 20, 21], [26, 20, 22], [26, 21, 23], [27, 22, 23.5], [28, 23, 24], [29, 24, 25], [30, 25, 26], [31, 26, 27], [31, 28, 28], [32, 31, 28.5], [33, 34, 29], [34, 37, 31], [36, 38.5, 33], [38, 40, 35], [39, 41, 36], [40, 42.5, 37.5], [41, 44, 39], [42, 45, 40], [42.5, 45.5, 41], [43, 46, 42], [44, 47, 43], [44.5, 48, 44], [45, 49, 45], [46, 50, 46], [46.5, 50.5, 46.5], [47, 51, 47], [48, 52, 48], [48.5, 53, 49], [49, 54, 50], [49, 55, 50], [50, 56, 51], [51, 57, 52], [51, 58, 52], [51.5, 59, 53], [52, 60, 54], [53, 62, 54], [53.5, 65, 55], [54, 68, 56], [55, 68, 56], [55.5, 68, 57], [56, 0, 58], [57, 0, 58], [58, 0, 59], [59, 0, 60], [60, 0, 61], [61, 0, 62], [62, 0, 63], [64, 0, 65], [66, 0, 66], [68, 0, 67]],
            'itp1': [[25, 20, 22], [26, 22, 23], [27, 24, 24], [28, 25, 25], [29, 26, 26], [30, 28, 27], [31, 29, 28], [32, 30, 28], [33, 32, 29], [34, 33, 30], [36, 34, 31], [37, 35, 32], [38, 36, 33], [39, 37, 34], [40, 38, 35], [41, 39, 36], [41, 40, 37], [42, 41, 38], [43, 42, 39], [43, 43, 40], [44, 44, 41], [44, 45, 41], [45, 46, 42], [46, 47, 43], [46, 48, 44], [47, 49, 45], [48, 50, 45], [48, 51, 46], [49, 52, 47], [49, 53, 47], [50, 54, 48], [50, 55, 48], [51, 57, 49], [52, 58, 49], [52, 59, 50], [53, 61, 51], [54, 63, 52], [55, 64, 53], [56, 66, 54], [56, 67, 55], [57, 68, 56], [58, 0, 57], [59, 0, 58], [60, 0, 59], [61, 0, 60], [62, 0, 61], [63, 0, 63], [64, 0, 65], [66, 0, 66], [68, 0, 67], [68, 0, 67]]
        };

        let currentTest = '';

        function selectTest() {
            const testType = document.getElementById('testType').value;
            if (!testType) {
                alert('Please select a test type.');
                return;
            }
            
            currentTest = testType;
            showStep('scoreInput');
        }

        function calculateScore() {
            const listening = parseInt(document.getElementById('listening').value);
            const structure = parseInt(document.getElementById('structure').value);
            const reading = parseInt(document.getElementById('reading').value);

            // Clear previous errors
            hideErrors();

            let hasError = false;

            // Validate inputs
            if (isNaN(listening) || listening < 0 || listening > 50) {
                showError('listeningError');
                hasError = true;
            }

            if (isNaN(structure) || structure < 0 || structure > 40) {
                showError('structureError');
                hasError = true;
            }

            if (isNaN(reading) || reading < 0 || reading > 50) {
                showError('readingError');
                hasError = true;
            }

            if (hasError) return;

            // Calculate scores
            const testData = testChoices[currentTest];
            const v1 = Math.round(testData[listening][0] * 10);
            const v2 = Math.round(testData[structure][1] * 10);
            const v3 = Math.round(testData[reading][2] * 10);
            const result = Math.round((v1 + v2 + v3) / 3);

            // Display results
            document.getElementById('listeningScore').textContent = v1;
            document.getElementById('structureScore').textContent = v2;
            document.getElementById('readingScore').textContent = v3;
            document.getElementById('finalScore').textContent = result;

            showStep('results');
        }

        function calculateAnother() {
            // Clear form inputs
            document.getElementById('listening').value = '';
            document.getElementById('structure').value = '';
            document.getElementById('reading').value = '';
            hideErrors();
            showStep('scoreInput');
        }

        function changeTest() {
            document.getElementById('testType').value = '';
            currentTest = '';
            showStep('testSelection');
        }

        function backToTestSelection() {
            changeTest();
        }

        function showStep(stepId) {
            const steps = ['testSelection', 'scoreInput', 'results'];
            steps.forEach(step => {
                document.getElementById(step).classList.add('hidden');
            });
            document.getElementById(stepId).classList.remove('hidden');
        }

        function showError(errorId) {
            document.getElementById(errorId).classList.remove('hidden');
        }

        function hideErrors() {
            const errors = ['listeningError', 'structureError', 'readingError'];
            errors.forEach(error => {
                document.getElementById(error).classList.add('hidden');
            });
        }
    </script>
</body>
</html>
